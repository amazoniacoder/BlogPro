# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–µ–Ω—é

## üîç –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getMenuTree()` —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `WHERE is_active = true`
- **–ê–¥–º–∏–Ω–∫–∞** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getAllMenuItems()` –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞
- **Header** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getMenuTree()` –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞

### 2. –î–≤–æ–π–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –°–µ—Ä–≤–µ—Ä —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ `getMenuTree()`
- –ö–ª–∏–µ–Ω—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –≤ `SmartNavigation`
- –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ª–æ–≥–∏–∫–∏

### 3. CSS –ø—Ä–æ–±–ª–µ–º—ã
- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏–º–µ–ª–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É
- –§–æ–Ω —Ä–∞—Å—Ç—è–≥–∏–≤–∞–ª—Å—è –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É –ø–æ–ª—è

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ API –º–µ—Ç–æ–¥–æ–≤
**–§–∞–π–ª**: `server/services/menuService.ts`
- `getMenuTree()` - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)
- `getFullMenuTree()` - –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–¥–ª—è –∞–¥–º–∏–Ω–∫–∏)

### 2. –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
**–§–∞–π–ª**: `server/api/menu/index.ts`
- –î–æ–±–∞–≤–ª–µ–Ω `GET /api/menu/admin/tree` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ API
**–§–∞–π–ª**: `client/src/services/api/menu.ts`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getFullMenuTree()` –¥–ª—è –∞–¥–º–∏–Ω–∫–∏

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ useMenuData
**–§–∞–π–ª**: `client/src/admin/pages/site-editor/hooks/useMenuData.ts`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `getFullMenuTree()` –≤–º–µ—Å—Ç–æ `getMenuTree()`

### 5. –£–±—Ä–∞–Ω–∞ –¥–≤–æ–π–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
**–§–∞–π–ª**: `client/src/ui-system/components/header/SmartNavigation.tsx`
- –£–±—Ä–∞–Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `is_active`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 6. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã CSS —Å—Ç–∏–ª–∏
**–§–∞–π–ª**: `client/src/ui-system/admin/site-editor.css`
- `width: auto` –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω—ã
- `min-width: fit-content` –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:
1. Header –≤—ã–∑—ã–≤–∞–µ—Ç `getMenuTree()` 
2. –°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (`WHERE is_active = true`)
3. –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

### –î–ª—è –∞–¥–º–∏–Ω–∫–∏:
1. –†–µ–¥–∞–∫—Ç–æ—Ä –º–µ–Ω—é –≤—ã–∑—ã–≤–∞–µ—Ç `getFullMenuTree()`
2. –°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–≤–∫–ª—é—á–∞—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ)
3. –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–∏–¥–Ω—ã –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ —Å –∫—Ä–∞—Å–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º

### –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
1. –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ —Å—Ç–∞—Ç—É—Å–∞ ‚Üí `toggleMenuItemActive()`
2. API –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª–µ `is_active` –≤ –±–∞–∑–µ
3. WebSocket —Å–æ–±—ã—Ç–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
4. Header –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –º–µ–Ω—é —Å –Ω–æ–≤–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í –∞–¥–º–∏–Ω–∫–µ (/admin/site-editor):
- ‚úÖ –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–∏–¥–Ω—ã (–∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞
- ‚úÖ –¶–≤–µ—Ç –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ
- ‚úÖ –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –∏—Å—á–µ–∑–∞—é—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ:
- ‚úÖ –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ü–æ–¥–º–µ–Ω—é —Ç–∞–∫–∂–µ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### CSS –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:
- ‚úÖ –§–æ–Ω –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä–æ–º —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ hover —ç—Ñ—Ñ–µ–∫—Ç—ã

## üìã –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. `server/services/menuService.ts` - –¥–æ–±–∞–≤–ª–µ–Ω `getFullMenuTree()`
2. `server/api/menu/index.ts` - –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `/admin/tree`
3. `client/src/services/api/menu.ts` - –º–µ—Ç–æ–¥ `getFullMenuTree()`
4. `client/src/admin/pages/site-editor/hooks/useMenuData.ts` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞
5. `client/src/ui-system/components/header/SmartNavigation.tsx` - —É–±—Ä–∞–Ω–∞ –¥–≤–æ–π–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
6. `client/src/ui-system/admin/site-editor.css` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–∫–∏

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- **–ê–¥–º–∏–Ω–∫–∞** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **CSS –∫–Ω–æ–ø–∫–∏** –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–∞–∑–º–µ—Ä—É —Ç–µ–∫—Å—Ç–∞